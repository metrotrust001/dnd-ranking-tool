import{c as J,b as se,j as V,h as I,a as fe,x as le,g as P,P as ue,y as ce,z as oe,A as Q,i as G,k as N,C as ve,Q as de,I as X,K as pe,B as he,R as W,m as _e,T as Z,U as $,V as me,W as K,D as j,G as we,X as U,Y as Ee,Z as L,q as ye,F as ee,f as Ae,_ as Te,a0 as xe,a1 as He,v as Se,a2 as ae,a3 as be}from"./DQ75lygs.js";let k=null;function Ne(r,a){return a}function Ie(r,a,e){for(var s=r.items,c=[],l=a.length,u=0;u<l;u++)Te(a[u].e,c,!0);var p=l>0&&c.length===0&&e!==null;if(p){var E=e.parentNode;xe(E),E.append(e),s.clear(),x(r,a[0].prev,a[l-1].next)}He(c,()=>{for(var w=0;w<l;w++){var v=a[w];p||(s.delete(v.k),x(r,v.prev,v.next)),ee(v.e,!p)}})}function ge(r,a,e,s,c,l=null){var u=r,p={flags:a,items:new Map,first:null},E=(a&ae)!==0;if(E){var w=r;u=I?V(fe(w)):w.appendChild(J())}I&&le();var v=null,S=!1,y=new Map,C=ue(()=>{var o=e();return me(o)?o:o==null?[]:$(o)}),i,_;function n(){Ce(_,i,p,y,u,c,a,s,e),l!==null&&(i.length===0?v?j(v):v=X(()=>l(u)):v!==null&&we(v,()=>{v=null}))}se(()=>{_??=Se,i=P(C);var o=i.length;if(S&&o===0)return;S=o===0;let m=!1;if(I){var A=ce(u)===oe;A!==(o===0)&&(u=Q(),V(u),G(!1),m=!0)}if(I){for(var H=null,d,t=0;t<o;t++){if(N.nodeType===ve&&N.data===de){u=N,m=!0,G(!1);break}var f=i[t],h=s(f,t);d=z(N,p,H,null,f,h,t,c,a,e),p.items.set(h,d),H=d}o>0&&V(Q())}if(I)o===0&&l&&(v=X(()=>l(u)));else if(pe()){var M=new Set,g=he;for(t=0;t<o;t+=1){f=i[t],h=s(f,t);var b=p.items.get(h)??y.get(h);b?(a&(U|K))!==0&&re(b,f,t,a):(d=z(null,p,null,null,f,h,t,c,a,e,!0),y.set(h,d)),M.add(h)}for(const[T,R]of p.items)M.has(T)||g.skipped_effects.add(R.e);g.oncommit(n)}else n();m&&G(!0),P(C)}),I&&(u=N)}function Ce(r,a,e,s,c,l,u,p,E){var w=(u&be)!==0,v=(u&(U|K))!==0,S=a.length,y=e.items,C=e.first,i=C,_,n=null,o,m=[],A=[],H,d,t,f;if(w)for(f=0;f<S;f+=1)H=a[f],d=p(H,f),t=y.get(d),t!==void 0&&(t.a?.measure(),(o??=new Set).add(t));for(f=0;f<S;f+=1){if(H=a[f],d=p(H,f),t=y.get(d),t===void 0){var h=s.get(d);if(h!==void 0){s.delete(d),y.set(d,h);var M=n?n.next:i;x(e,n,h),x(e,h,M),q(h,M,c),n=h}else{var g=i?i.e.nodes_start:c;n=z(g,e,n,n===null?e.first:n.next,H,d,f,l,u,E)}y.set(d,n),m=[],A=[],i=n.next;continue}if(v&&re(t,H,f,u),(t.e.f&L)!==0&&(j(t.e),w&&(t.a?.unfix(),(o??=new Set).delete(t))),t!==i){if(_!==void 0&&_.has(t)){if(m.length<A.length){var b=A[0],T;n=b.prev;var R=m[0],O=m[m.length-1];for(T=0;T<m.length;T+=1)q(m[T],b,c);for(T=0;T<A.length;T+=1)_.delete(A[T]);x(e,R.prev,O.next),x(e,n,R),x(e,O,b),i=b,n=O,f-=1,m=[],A=[]}else _.delete(t),q(t,i,c),x(e,t.prev,t.next),x(e,t,n===null?e.first:n.next),x(e,n,t),n=t;continue}for(m=[],A=[];i!==null&&i.k!==d;)(i.e.f&L)===0&&(_??=new Set).add(i),A.push(i),i=i.next;if(i===null)continue;t=i}m.push(t),n=t,i=t.next}if(i!==null||_!==void 0){for(var D=_===void 0?[]:$(_);i!==null;)(i.e.f&L)===0&&D.push(i),i=i.next;var F=D.length;if(F>0){var ne=(u&ae)!==0&&S===0?c:null;if(w){for(f=0;f<F;f+=1)D[f].a?.measure();for(f=0;f<F;f+=1)D[f].a?.fix()}Ie(e,D,ne)}}w&&ye(()=>{if(o!==void 0)for(t of o)t.a?.apply()}),r.first=e.first&&e.first.e,r.last=n&&n.e;for(var ie of s.values())ee(ie.e);s.clear()}function re(r,a,e,s){(s&U)!==0&&W(r.v,a),(s&K)!==0?W(r.i,e):r.i=e}function z(r,a,e,s,c,l,u,p,E,w,v){var S=k,y=(E&U)!==0,C=(E&Ee)===0,i=y?C?_e(c,!1,!1):Z(c):c,_=(E&K)===0?u:Z(u),n={i:_,v:i,k:l,a:null,e:null,prev:e,next:s};k=n;try{if(r===null){var o=document.createDocumentFragment();o.append(r=J())}return n.e=X(()=>p(r,i,_,w),I),n.e.prev=e&&e.e,n.e.next=s&&s.e,e===null?v||(a.first=n):(e.next=n,e.e.next=n.e),s!==null&&(s.prev=n,s.e.prev=n.e),n}finally{k=S}}function q(r,a,e){for(var s=r.next?r.next.e.nodes_start:e,c=a?a.e.nodes_start:e,l=r.e.nodes_start;l!==null&&l!==s;){var u=Ae(l);c.before(l),l=u}}function x(r,a,e){a===null?r.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}async function te(r,a,e){const s=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(r)),c=await crypto.subtle.importKey("raw",s,{name:"HKDF"},!1,["deriveKey"]),l=new Uint8Array([...new TextEncoder().encode(a.toString()),...new Uint8Array(e)].slice(0,16));return crypto.subtle.deriveKey({name:"HKDF",salt:l,info:new TextEncoder().encode("vote-encrypt"),hash:"SHA-256"},c,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function Re(r,a){let e=await Me();const s=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(r)),c=await te(a,e,s),l=crypto.getRandomValues(new Uint8Array(12)),u=await crypto.subtle.encrypt({name:"AES-GCM",iv:l},c,new TextEncoder().encode(r));return{iv:B(l),ciphertext:B(u),timestamp:e,fileHash:B(s)}}async function Ke(r,a){const e=await te(a,r.timestamp,Y(r.fileHash)),s=Y(r.iv),c=Y(r.ciphertext),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,c);return new TextDecoder().decode(l)}async function Me(){const r=await fetch("https://api.bitget.com/api/v2/public/time");if(!r.ok)throw new Error("Failed to fetch");const a=await r.json();return Number(a.data.serverTime)}function B(r){return Array.from(new Uint8Array(r)).map(a=>a.toString(16).padStart(2,"0")).join("")}function Y(r){const a=r.match(/.{1,2}/g).map(e=>parseInt(e,16));return new Uint8Array(a).buffer}export{Re as a,k as c,Ke as d,ge as e,Ne as i};
