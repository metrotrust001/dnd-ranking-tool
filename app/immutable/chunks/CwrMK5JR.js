import{k as z,b as se,d as L,h as I,F as fe,a as le,A as P,G as ue,c as oe,H as ce,s as Q,f as V,m as D,I as ve,J as de,l as X,o as pe,g as he,K as W,L as _e,M as Z,N as $,O as me,P as K,i as j,p as we,Q as O,R as Ee,T as G,q as ye,j as ee,U as Ae,V as Te,W as xe,X as He,Y as Se,Z as ae,_ as be}from"./DNRmIxaC.js";let k=null;function De(r,a){return a}function Ie(r,a,e){for(var s=r.items,o=[],l=a.length,u=0;u<l;u++)Te(a[u].e,o,!0);var p=l>0&&o.length===0&&e!==null;if(p){var E=e.parentNode;xe(E),E.append(e),s.clear(),x(r,a[0].prev,a[l-1].next)}He(o,()=>{for(var w=0;w<l;w++){var v=a[w];p||(s.delete(v.k),x(r,v.prev,v.next)),ee(v.e,!p)}})}function ge(r,a,e,s,o,l=null){var u=r,p={flags:a,items:new Map,first:null},E=(a&ae)!==0;if(E){var w=r;u=I?L(fe(w)):w.appendChild(z())}I&&le();var v=null,S=!1,y=new Map,M=ue(()=>{var c=e();return me(c)?c:c==null?[]:$(c)}),i,_;function n(){Me(_,i,p,y,u,o,a,s,e),l!==null&&(i.length===0?v?j(v):v=X(()=>l(u)):v!==null&&we(v,()=>{v=null}))}se(()=>{_??=Se,i=P(M);var c=i.length;if(S&&c===0)return;S=c===0;let m=!1;if(I){var A=oe(u)===ce;A!==(c===0)&&(u=Q(),L(u),V(!1),m=!0)}if(I){for(var H=null,d,t=0;t<c;t++){if(D.nodeType===ve&&D.data===de){u=D,m=!0,V(!1);break}var f=i[t],h=s(f,t);d=J(D,p,H,null,f,h,t,o,a,e),p.items.set(h,d),H=d}c>0&&L(Q())}if(I)c===0&&l&&(v=X(()=>l(u)));else if(pe()){var C=new Set,g=he;for(t=0;t<c;t+=1){f=i[t],h=s(f,t);var b=p.items.get(h)??y.get(h);b?(a&(O|K))!==0&&re(b,f,t,a):(d=J(null,p,null,null,f,h,t,o,a,e,!0),y.set(h,d)),C.add(h)}for(const[T,R]of p.items)C.has(T)||g.skipped_effects.add(R.e);g.oncommit(n)}else n();m&&V(!0),P(M)}),I&&(u=D)}function Me(r,a,e,s,o,l,u,p,E){var w=(u&be)!==0,v=(u&(O|K))!==0,S=a.length,y=e.items,M=e.first,i=M,_,n=null,c,m=[],A=[],H,d,t,f;if(w)for(f=0;f<S;f+=1)H=a[f],d=p(H,f),t=y.get(d),t!==void 0&&(t.a?.measure(),(c??=new Set).add(t));for(f=0;f<S;f+=1){if(H=a[f],d=p(H,f),t=y.get(d),t===void 0){var h=s.get(d);if(h!==void 0){s.delete(d),y.set(d,h);var C=n?n.next:i;x(e,n,h),x(e,h,C),q(h,C,o),n=h}else{var g=i?i.e.nodes_start:o;n=J(g,e,n,n===null?e.first:n.next,H,d,f,l,u,E)}y.set(d,n),m=[],A=[],i=n.next;continue}if(v&&re(t,H,f,u),(t.e.f&G)!==0&&(j(t.e),w&&(t.a?.unfix(),(c??=new Set).delete(t))),t!==i){if(_!==void 0&&_.has(t)){if(m.length<A.length){var b=A[0],T;n=b.prev;var R=m[0],U=m[m.length-1];for(T=0;T<m.length;T+=1)q(m[T],b,o);for(T=0;T<A.length;T+=1)_.delete(A[T]);x(e,R.prev,U.next),x(e,n,R),x(e,U,b),i=b,n=U,f-=1,m=[],A=[]}else _.delete(t),q(t,i,o),x(e,t.prev,t.next),x(e,t,n===null?e.first:n.next),x(e,n,t),n=t;continue}for(m=[],A=[];i!==null&&i.k!==d;)(i.e.f&G)===0&&(_??=new Set).add(i),A.push(i),i=i.next;if(i===null)continue;t=i}m.push(t),n=t,i=t.next}if(i!==null||_!==void 0){for(var N=_===void 0?[]:$(_);i!==null;)(i.e.f&G)===0&&N.push(i),i=i.next;var F=N.length;if(F>0){var ne=(u&ae)!==0&&S===0?o:null;if(w){for(f=0;f<F;f+=1)N[f].a?.measure();for(f=0;f<F;f+=1)N[f].a?.fix()}Ie(e,N,ne)}}w&&ye(()=>{if(c!==void 0)for(t of c)t.a?.apply()}),r.first=e.first&&e.first.e,r.last=n&&n.e;for(var ie of s.values())ee(ie.e);s.clear()}function re(r,a,e,s){(s&O)!==0&&W(r.v,a),(s&K)!==0?W(r.i,e):r.i=e}function J(r,a,e,s,o,l,u,p,E,w,v){var S=k,y=(E&O)!==0,M=(E&Ee)===0,i=y?M?_e(o,!1,!1):Z(o):o,_=(E&K)===0?u:Z(u),n={i:_,v:i,k:l,a:null,e:null,prev:e,next:s};k=n;try{if(r===null){var c=document.createDocumentFragment();c.append(r=z())}return n.e=X(()=>p(r,i,_,w),I),n.e.prev=e&&e.e,n.e.next=s&&s.e,e===null?v||(a.first=n):(e.next=n,e.e.next=n.e),s!==null&&(s.prev=n,s.e.prev=n.e),n}finally{k=S}}function q(r,a,e){for(var s=r.next?r.next.e.nodes_start:e,o=a?a.e.nodes_start:e,l=r.e.nodes_start;l!==null&&l!==s;){var u=Ae(l);o.before(l),l=u}}function x(r,a,e){a===null?r.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}async function te(r,a,e){const s=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(r)),o=await crypto.subtle.importKey("raw",s,{name:"HKDF"},!1,["deriveKey"]),l=new Uint8Array([...new TextEncoder().encode(a.toString()),...new Uint8Array(e)].slice(0,16));return crypto.subtle.deriveKey({name:"HKDF",salt:l,info:new TextEncoder().encode("vote-encrypt"),hash:"SHA-256"},o,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function Re(r,a){let e=await Ce();const s=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(r)),o=await te(a,e,s),l=crypto.getRandomValues(new Uint8Array(12)),u=await crypto.subtle.encrypt({name:"AES-GCM",iv:l},o,new TextEncoder().encode(r));return{iv:Y(l),ciphertext:Y(u),timestamp:e,fileHash:Y(s)}}async function Ke(r,a){const e=await te(a,r.timestamp,B(r.fileHash)),s=B(r.iv),o=B(r.ciphertext),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,o);return new TextDecoder().decode(l)}async function Ce(){const r=await fetch("https://api.bitget.com/api/v2/public/time");if(!r.ok)throw new Error("Failed to fetch");const a=await r.json();return Number(a.data.serverTime)}function Y(r){return Array.from(new Uint8Array(r)).map(a=>a.toString(16).padStart(2,"0")).join("")}function B(r){const a=r.match(/.{1,2}/g).map(e=>parseInt(e,16));return new Uint8Array(a).buffer}export{Re as a,k as c,Ke as d,ge as e,De as i};
